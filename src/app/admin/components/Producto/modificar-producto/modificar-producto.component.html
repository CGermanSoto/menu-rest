<h1>Modificar Producto</h1>

<h3>Lista de Productos</h3>
<table class="table table-hover table-bordered">
  <thead>
    <tr>
      <th scope="col">#Id Producto</th>
      <th scope="col">Nombre</th>
      <th scope="col" class="categoria">Categoría</th>
      <th scope="col">Precio</th>
      <th scope="col">Imagen</th>
      <th scope="col">Editar</th>
      <th scope="col">Eliminar</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let producto of productos; let i = index">
      <th scope="row">{{ producto.productoId }}</th>

      <!-- Campo para editar el nombre del producto -->
      <td>
        <input 
          type="text" 
          [(ngModel)]="producto.nombre"
          [disabled]="!editableIndex.includes(i)">
      </td>
      <td>
        <select 
          [(ngModel)]="producto.categoria" 
          [disabled]="!editableIndex.includes(i)" 
          class="form-select"
        >
          <option *ngFor="let categoria of categoriasList" [value]="categoria.categoria">
            {{ categoria.categoria }}
          </option>
        </select>
      </td>      

      <td>
        <input
          type="text"
          [disabled]="!editableIndex.includes(i)"
          [value]="!editableIndex.includes(i) ? (producto.precio | currency:'ARS':'symbol':'1.2-2') : producto.precio"
          (change)="actualizarPrecio(i, $event)">
      </td>          

            
      <td>
        <input 
          type="file"
          [disabled]="!editableIndex.includes(i)">
      </td>

      <!-- Botón para habilitar la edición -->
      <td>
        <a (click)="editarProducto(i)">
          <img [src]="editableIndex.includes(i) ? 'guardar.png' : 'editar.png'" alt="Editar o Guardar">
        </a>
      </td>

      <!-- Botón para eliminar producto -->
      <td>
        <a (click)="eliminarProducto(producto.productoId)">
          <img src="eliminar.png">
        </a>
      </td>
    </tr>
  </tbody>
</table>


<div class="d-grid gap-2 d-md-flex justify-content-md-end">
    <button class="btn btn-primary me-md-2" type="button" (click)="guardarCambios()">Guardar Cambios</button>
</div>